"use strict";function copyText(e){document.querySelector(e).select(),document.execCommand("copy")}window.addEventListener("load",()=>{$("#speciesInput").on("keyup paste cut",function(){var e=document.getElementById("searchOp").value;if(e=[1==e,2==e,e%3==0,e%4==0],document.getElementById("RegExp").checked){let l=this.parentNode;try{var t=new RegExp($(this).val(),"ig");$("#speciesList li,#npcList li").filter(function(){$(this).toggle(e[0]&&t.test(this.firstChildocument.innerHTML)||e[1]&&t.test(this.getAttribute("value"))||e[3]&&t.test(this.dataset.author)||e[2]&&t.test(this.dataset.mod)),$(this).toggle(t.test(this.getAttribute("value")))}),l.classList.remove("err")}catch(t){l.classList.add("err")}}else{var l=$(this).val().trim().toLowerCase(),i=e=>e.toLowerCase().indexOf(l)>-1;$("#speciesList li,#npcList li").filter(function(){$(this).toggle(e[0]&&i(this.firstChildocument.innerHTML)||e[1]&&i(this.getAttribute("value"))||e[3]&&i(this.dataset.author)||e[2]&&i(this.dataset.mod))}),$("#mods li").filter(function(){$(this).toggle(i(this.getAttribute("value")))})}});var e=new FileReader;document.getElementById("iimport").addEventListener("change",()=>{e.addEventListener("loadend",e=>{var t=JSON.parse(e.srcElement.result);for(let e in t)for(let l of t[e])setLi(e,l)}),e.readAsText(document.getElementById("iimport").files[0])}),document.getElementById("removeAll").addEventListener("click",e=>{function t(e){if(e.shiftKey){var t=elm.npcTab.querySelectorAll(".nav-link-sel>a"),l=t.length,i=[];for(let e=0;e<l;e++){let l=t[e].dataset.hash;i[e]="active-"+l.slice(1),$(`${l}:First ul:First`).empty()}$("#speciesList li").removeClass(i.join(" "))}else $("#speciesList li").removeClass("active-"+location.hash.slice(1)),$(location.hash+":First ul:First").empty()}e.ctrlKey?t(e):alertModal(`Remove all items from the ${e.shiftKey?"selected":"current"} list${e.shiftKey?"(s)":""}?`,"This Cannot be undone!",{resolve:[t,e]})}),document.getElementById("removeVisible").addEventListener("click",function(e){var t=elm.speciesList.querySelectorAll("li"),l=t.length;if(e.shiftKey){var i=elm.npcTab.querySelectorAll(".nav-link-sel>a"),s=i.length;for(let e=0;e<s;e++){var n="active-"+i[e].dataset.hash.slice(1);for(let s=0;s<l;s++)if(t[s].classList.contains(n)&&"none"!==t[s].style.display){t[s].classList.remove(n);let l=document.querySelector(i[e].dataset.hash+` [value="${t[s].getAttribute("value")}"]`);l.parentNode.removeChild(l)}}}else{var a=location.hash;n="active-"+a.slice(1);for(let e=0;e<l;e++)if(t[e].classList.contains(n)&&"none"!==t[e].style.display){t[e].classList.remove(n);let l=document.querySelector(a+` [value="${t[e].getAttribute("value")}"]`);l.parentNode.removeChild(l)}}}),document.getElementById("addVisible").addEventListener("click",function(e){var t=elm.speciesList.querySelectorAll("li");const l=t.length;if(e.shiftKey){var i=elm.npcTab.querySelectorAll(".nav-link-sel>a"),s=[],n=[];const e=i.length;for(let t=0;t<e;)s[t]=document.getElementById(i[t].dataset.hash.slice(1)),n[t++]="active-"+s[t].id.slice(1);for(let e=0;e<l;e++)if("none"!==t[e].style.display){let l=t[e].cloneNode(1);l.id="",l.classList.add(...n);for(let i in s)t[e].classList.contains(n[i])||(t[e].classList.add(n[i]),s[i].getElementsByTagName("ul")[0].prepend(readyLi(l.cloneNode(1))))}}else{var a=location.hash;n="active-"+a.slice(1);for(let e=0;e<l;e++)if(!t[e].classList.contains(n)&&"none"!==t[e].style.display){//!
t[e].classList.add(n);let l=t[e].cloneNode(1);l.querySelector(".addToAll").addEventListener("click",addToAll),l.querySelector(".removeFromAll").addEventListener("click",removeFromAll),l.querySelector(".species").addEventListener("click",removeEl),l.id="",document.querySelector(a+">ul").prepend(readyLi(l))}}}),document.getElementById("iexport").addEventListener("click",()=>{saveData(getLi(),"value.DyS.json")}),document.getElementById("imp").addEventListener("click",()=>{document.getElementById("iimport").click()}),document.getElementById("download").addEventListener("click",function(){var e=getLi(),t=[],l=[],i=0,s=0,n=()=>{document.getElementById("modalCancel").style.display=""};for(let n in e)e[n].length<1?l[s++]=++i:0===s&&(t[i++]=n+`:"${e[n].join(",")}"`);//!
if(document.getElementById("modalCancel").style.display="none",s>0){for(let e in l)l[e]=elm.npcTab.querySelector(`li:nth-child(${l[e]})>a`).innerHTML.replace(/ ?<span class="[^"]+">.<.span>$/,"");alertModal("Cannot download!","No Species exist in "+l.join(", "),{finally:[n]})}else alertModal("Paste the copped value to the file name","Then continue the application",{resolve:[()=>{var e=document.getElementById("path");e&&(e.disabled=!1,e.value+="value.DyS.cosv",e.select(),document.execCommand("copy"),e.value=e.value.replace(/value\.DyS\.cosv$/i,""),e.disabled=!0),saveData(t.join("\n"),"value.DyS.cosv",!0)}],finally:[n]})})});